function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var FDCPModal=(()=>_createClass(function e(t){_classCallCheck(this,e),this.modal=t,this.isStatic="true"===t.dataset.static,this.closeButton=t.querySelector(".fdcp-modal__close"),this.backdrop=t.querySelector(".fdcp-modal__backdrop"),this.bindEvents()},[{key:"bindEvents",value:function(){var t=this;this.closeButton&&this.closeButton.addEventListener("click",function(){return t.hide()}),this.isStatic||this.backdrop.addEventListener("click",function(){return t.hide()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&!t.isStatic&&t.modal.classList.contains("show")&&t.hide()})}},{key:"show",value:function(){this.modal.classList.add("show"),document.body.style.overflow="hidden"}},{key:"hide",value:function(){this.modal.classList.remove("show"),document.body.style.overflow=""}}]))();function debounce(a,o){var i;return function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];clearTimeout(i),i=setTimeout(function(){return a.apply(e,n)},o)}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".fdcp-modal").forEach(function(e){new FDCPModal(e)})}),document.addEventListener("DOMContentLoaded",function(){var t,e,n,r,a,o,i,c,l,u,d,s,f=document.getElementById("session-extend-modal");f&&(t=new FDCPModal(f),e=parseInt(f.dataset.sessionTimeout,10),n=parseInt(f.dataset.reminderTime,10),r=f.dataset.refresh,a=f.dataset.logoutUrl,o=document.getElementById("session-countdown"),u=function(){clearTimeout(i),clearInterval(c),i=setTimeout(function(){var e=new CustomEvent("foundation:session-reminder",{detail:{remainingTime:60*n}});window.dispatchEvent(e),l=60*n,t.show(),d()},60*(e-n)*1e3)},d=function(){o&&(o.textContent="".concat(l,"s"),c=setInterval(function(){--l<=0?(clearInterval(c),window.location.href=a):o.textContent="".concat(l,"s")},1e3))},f=document.querySelector('[button-id="session-extend-refresh-btn"]'),s=document.querySelector('[button-id="session-extend-logout-btn"]'),f&&f.addEventListener("click",function(){fetch(r,{method:"POST",credentials:"include"}).then(function(){t.hide(),u()})}),s&&s.addEventListener("click",function(){window.location.href=a}),u())}),document.querySelectorAll(".tabulator-table").forEach(function(e){var t,r,n={layout:e.dataset.layout||"fitColumns",pagination:!0,paginationSize:parseInt(e.dataset.paginationSize||"10"),columns:[],height:"100%"};if(e.dataset.columns)try{n.columns=JSON.parse(e.dataset.columns)}catch(e){console.error("Failed to parse columns:",e)}e.dataset.set?n.data=JSON.parse(e.dataset.set):e.dataset.ajaxurl&&(n.ajaxURL=e.dataset.ajaxurl,n.filterMode="remote",n.sortMode="remote",n.ajaxConfig="POST",n.ajaxContentType="json",n.paginationMode="remote",n.filterMode="remote",e.dataset.antiforgeryToken)&&(t=(new DOMParser).parseFromString(e.dataset.antiforgeryToken,"text/html").querySelector('input[name="__RequestVerificationToken"]'))&&(r=t.getAttribute("value"),n.ajaxRequestFunc=function(e,t,n){return fetch(e,{method:"POST",headers:{"Content-Type":"application/json",RequestVerificationToken:r},body:JSON.stringify(n)}).then(function(e){return e.json()})}),new Tabulator(e,n)}),document.querySelectorAll(".tabulator-search-input").forEach(function(e){e.addEventListener("input",debounce(function(e){var t=e.target.dataset.tabulatorId,n=Tabulator.findTable("#"+t)[0],r=e.target.value.trim();n&&(""===r?n.clearFilter():(e=document.getElementById(t),t=JSON.parse(e.dataset.filterableFields||"[]"),n.setFilter(t.map(function(e){return{field:e,type:"like",value:r}}))))},200))}),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-fdcp-collapse-toggle]").forEach(function(e){e.addEventListener("click",function(){var e=this.getAttribute("data-fdcp-collapse-toggle"),e=document.getElementById(e),t="true"===this.getAttribute("aria-expanded");this.setAttribute("aria-expanded",(!t).toString()),e&&e.classList.toggle("fdcp-show",!t)})})}),document.addEventListener("DOMContentLoaded",function(){initializeDependencies()});var initializeDependencies=function(){var r=new Map;document.querySelectorAll("[data-dependencies]").forEach(function(n){try{JSON.parse(n.getAttribute("data-dependencies")).forEach(function(e){var t=e.sourceQuestionId;r.has(t)||r.set(t,[]),r.get(t).push({targetId:n.getAttribute("input-id")||n.getAttribute("select-id")||n.getAttribute("textarea-id")||n.getAttribute("radio-id")||n.getAttribute("checkbox-id")||n.getAttribute("id"),dependency:e})})}catch(e){console.error("Error parsing dependencies:",e)}}),r.forEach(function(t,e){var a,n=document.querySelector('\n            [input-id="'.concat(e,'"],\n            [select-id="').concat(e,'"],\n            [textarea-id="').concat(e,'"],\n            [id="').concat(e,'"],\n            [fieldset-id="').concat(e,'"]\n        '));n?(a=getGCDSValue(n),t.forEach(function(e){var t,n=e.targetId,e=e.dependency,r=document.querySelector('\n                [input-id="'.concat(n,'"],\n                [select-id="').concat(n,'"],\n                [textarea-id="').concat(n,'"],\n                [radio-id="').concat(n,'"],\n                [checkbox-id="').concat(n,'"],\n                [id="').concat(n,'"]\n            '));r?(t=evaluateCondition(e,a),applyDependencyAction(r,e.action,t,e)):console.warn("Target element with ID ".concat(n," not found"))}),n.addEventListener("gcdsChange",function(e){var a=e.detail;t.forEach(function(e){var t,n=e.targetId,e=e.dependency,r=document.querySelector('\n                    [input-id="'.concat(n,'"],\n                    [select-id="').concat(n,'"],\n                    [textarea-id="').concat(n,'"],\n                    [radio-id="').concat(n,'"],\n                    [checkbox-id="').concat(n,'"],\n                    [id="').concat(n,'"]\n                '));r?(t=evaluateCondition(e,a),applyDependencyAction(r,e.action,t,e)):console.warn("Target element with ID ".concat(n," not found"))})})):console.warn("Source element ".concat(e," not found for dependencies"))})},getGCDSValue=function(e){if(!e)return null;switch(e.tagName.toLowerCase()){case"gcds-input":case"gcds-select":case"gcds-textarea":return e.value;case"gcds-checkbox":return e.name?(t=e.closest("gcds-fieldset"))?Array.from(t.querySelectorAll("gcds-checkbox:checked")).map(function(e){return e.value}):(t=document.querySelectorAll('gcds-checkbox[name="'.concat(e.name,'"]:checked')),Array.from(t).map(function(e){return e.value})):e.checked;case"gcds-radio":var t=document.querySelector('gcds-radio[name="'.concat(e.name,'"]:checked'));return t?t.value:null;default:return e.value}},evaluateCondition=function(e,t){e=e.triggerValue;return String(t)===String(e)},applyDependencyAction=function(e,t,n,r){var a=findFormGroupWrapper(e);switch(t){case 0:setRequired(e,n);break;case 1:toggleVisibility(a,n);break;case 2:toggleVisibility(a,!n);break;case 3:toggleDisabled(e,!n);break;case 4:toggleDisabled(e,n);break;case 5:n&&clearElementValue(e);break;case 6:n&&r.setValue&&setElementValue(e,r.setValue);break;default:console.warn("Unsupported action: ".concat(t))}},reinitializeGCDSComponent=function(e){if(e&&e.tagName.toLowerCase().startsWith("gcds-"))try{var t,n,r,a;if(e.parentNode)return t=getGCDSValue(e),n=e.hasAttribute("required"),r=e.hasAttribute("disabled"),a=e.cloneNode(!0),n&&a.setAttribute("required",""),r&&a.setAttribute("disabled",""),e.parentNode.replaceChild(a,e),null!=t&&setTimeout(function(){setElementValue(a,t)},0),a;console.warn("Cannot reinitialize detached element:",e)}catch(e){console.error("Error reinitializing GCDS component:",e)}},findFormGroupWrapper=function(e){var t=e.closest(".gc-form-group");return t||((t=e.closest("gcds-fieldset")||("gcds-fieldset"===e.tagName.toLowerCase()?e:null))?t.closest(".gc-form-group")||t.parentElement||e:e.parentElement||e)},toggleVisibility=function(e,t){e&&(t?(e.classList.remove("gc-form-hidden"),e.querySelectorAll('[class^="gcds-"]').forEach(function(e){reinitializeGCDSComponent(e)})):e.classList.add("gc-form-hidden"))},toggleDisabled=function(e,t){e.disabled!==t&&(e.disabled=t,e.setAttribute("aria-disabled",t))},setRequired=function(e,t){if(e)try{var n=e.cloneNode(!0);n.removeAttribute("error-message"),n.tagName.toLowerCase().startsWith("gcds-")?t?n.setAttribute("required",""):n.removeAttribute("required"):(n.required=t)?n.setAttribute("required",""):n.removeAttribute("required"),e.parentNode.replaceChild(n,e)}catch(e){console.warn("Error setting required state:",e)}},clearElementValue=function(e){"checkbox"===e.type||"radio"===e.type?e.checked=!1:e.value="",triggerChangeEvent(e)},setElementValue=function(e,t){"checkbox"===e.type||"radio"===e.type?e.checked=!0===t||"true"===t:e.value=t,triggerChangeEvent(e)};function _createForOfIteratorHelper(e,t){var n,r,a,o,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return a=!(r=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return r=e.done,e},e:function(e){a=!0,n=e},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw n}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var n;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(n="Object"===(n={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}document.addEventListener("DOMContentLoaded",function(){initializeValidation()});var initializeValidation=function(){document.querySelectorAll("[data-validation-rules]").forEach(function(e){JSON.parse(e.getAttribute("data-validation-rules"));e.hasAttribute("validate-on-blur")&&e.addEventListener("blur",function(){return validateElement(e)});var t=e.closest("form");t&&!t.hasAttribute("validation-initialized")&&(t.addEventListener("submit",function(e){return validateForm(e)}),t.setAttribute("validation-initialized","true"))})},validateElement=function(e){var t,n=JSON.parse(e.getAttribute("data-validation-rules")),r=getGCDSValue(e),a=e.getAttribute("lang")||"en",o=!0,i="",c=_createForOfIteratorHelper(n);try{for(c.s();!(t=c.n()).done;){var l=t.value;if(!validateRule(l,r)){o=!1,i=l.errorMessages[a.toLowerCase()]||l.errorMessages.en||"Invalid value";break}}}catch(e){c.e(e)}finally{c.f()}return updateElementValidation(e,o,i),o},validateForm=function(e){var t=e.target,n=!0;t.querySelectorAll("[data-validation-rules]").forEach(function(e){validateElement(e)||(n=!1)}),!n&&(e.preventDefault(),e=t.querySelector(".gcds-form-error"))&&e.focus()},validateRule=function(e,t){if(!t&&"required"!==e.type)return!0;switch(e.type){case"required":return null!=t&&""!==t;case"regex":return new RegExp(e.pattern).test(t);case"email":return/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(t);case"minlength":return t.length>=e.min;case"maxlength":return t.length<=e.max;case"minvalue":return parseFloat(t)>=e.min;case"maxvalue":return parseFloat(t)<=e.max;default:return!0}},updateElementValidation=function(e,t,n){e.classList.remove("gcds-form-error");var r=e.nextElementSibling;null!=r&&r.classList.contains("gcds-error-message")&&r.remove(),t||(e.classList.add("gcds-form-error"),(r=document.createElement("div")).className="gcds-error-message",r.textContent=n,e.parentNode.insertBefore(r,e.nextSibling))},getGCDSValue=function(e){if(!e)return null;switch(e.tagName.toLowerCase()){case"gcds-input":case"gcds-select":case"gcds-textarea":return e.value;case"gcds-checkbox":return e.checked;case"gcds-radio":return e.checked?e.value:null;default:return e.value}};document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".fdcp-page-header--has-bg[data-bg-src]").forEach(function(e){var t=e.getAttribute("data-bg-src");t&&(e.style.backgroundImage="url("+t+")")})});
//# sourceMappingURL=foundation.min.js.map
